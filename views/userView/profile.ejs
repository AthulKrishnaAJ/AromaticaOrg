<!doctype html>
<html class="no-js" lang="">


<!-- Mirrored from htmldemo.net/minoan-v1/minoan/index-4.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 Feb 2024 13:30:20 GMT -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Aromatica</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- favicon
		============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/logo/favicon.ico">

    <!-- Google Fonts
		============================================ -->
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

    <!-- 
    Toastify css link
    ============================= -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">


    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->

    <!-- Font Awesome CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- Mean Menu CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/meanmenu.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/owl.theme.css">
    <link rel="stylesheet" href="assets/css/owl.transitions.css">
    <!-- nivo-slider css
		============================================ -->
    <link rel="stylesheet" href="assets/css/nivo-slider.css">
    <!-- Price slider css
		============================================ -->
    <link rel="stylesheet" href="assets/css/jquery-ui-slider.css">
    <!-- Simple Lence css
		============================================ -->
    <link rel="stylesheet" type="text/css" href="assets/css/jquery.simpleLens.css">
    <link rel="stylesheet" type="text/css" href="assets/css/jquery.simpleGallery.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/normalize.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/main.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="assets/style.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="assets/css/responsive.css">


</head>


<style>
    .quantity {
        display: flex;
        align-items: center;
    }

    .quantity input {
        width: 30px;
        /* Adjust the width as needed */
        text-align: center;
        margin: 0 5px;
    }
</style>



<body>
    <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

    <!-- Header Area -->
    <div class="header-area home-4-header-area">
        <!-- Header top bar -->
        <div class="header-top-bar">
            <div class="container">
                <div class="header-top-inner">
                    <div class="row">
                        <div class="col-md-8 col-sm-12">
                            <div class="header-top-left">
                                <div class="phone">
                                    <label>Call us:</label> (+88) 01737803547
                                </div>
                                <div class="e-mail">
                                    <label>Email:</label> admin@bootexperts.com
                                </div>
                                
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12">
                            <div class="header-top-right">
                                <!-- Header Social Icon -->
                                <div class="header-social-icon">
                                    <ul>
                                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                                        <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                                        <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                                        <li><a href="#"><i class="fa fa-youtube"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- End Header Top bar -->
        <!-- Header bottom -->
        <div class="header-bottom another-home-header-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 col-lg-3 col-sm-12">
                        <div class="heder-bottom-left">
                            <!-- Header logo -->
                            <div class="header-logo">
                                <a href="index.html"><img src="assets/img/logo/logo-2.webp" alt="logo"></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-9 col-sm-12">
                        <div class="header-bottom-right">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="header-search-cart-area">
                                        <!-- Header Cart Area-->
                                        <div class="header-cart-area">
                                            <div class="header-cart">
                                                <ul>
                                                    <li>
                                                        <a href="/cart">
                                                            <i class="fa fa-shopping-cart"></i>
                                                            <span class="my-cart">My cart</span>
                                                            <% if(userCart && userCart.items.length > 0){%>
                                                            <span class="badge"><%= userCart.items.length%></span>
                                                            <%}%>
                                                        </a>
                                                        <!-- <ul>
															<li>
																<div class="cart-list">
																	<div class="cart-list-item">
																		<div class="cart-list-img">
																			<a href="#"><img src="assets/img/cart/c1.webp"
																					alt="cart" /></a>
																		</div>
																		<div class="cart-content">
																			<a href="#">Etiam gravida</a>
																			<p>1 x <span>$432.00</span></p>
																		</div>
																		<div class="cart-button">
																			<a href="#"><i class="fa fa-pencil"></i></a>
																			<a href="#"><i class="fa fa-times"></i></a>
																		</div>
																	</div>
																</div>
																<div class="cart-list cart-list-two">
																	<div class="cart-list-item">
																		<div class="cart-list-img">
																			<a href="#"><img src="assets/img/cart/c2.webp"
																					alt="cart" /></a>
																		</div>
																		<div class="cart-content">
																			<a href="#">Etiam gravida</a>
																			<p>1 x <span>$432.00</span></p>
																		</div>
																		<div class="cart-button">
																			<a href="#"><i class="fa fa-pencil"></i></a>
																			<a href="#"><i class="fa fa-times"></i></a>
																		</div>
																	</div>
																</div>
																<div class="cart-subtotal">
																	<p>Subtotal: <span>$1,131.00</span></p>
																</div>
																<div class="cart-action">
																	<button type="button"
																		class="btn"><span>checkout</span> <i
																			class="fa fa-long-arrow-right"></i></button>
																</div>
															</li>
														</ul> -->
                                                    </li>
                                                    <li class="mt-2">
                                                        <a href="/wishlist">
                                                            <i class="fa fa-heart"></i>
                                                            <span class="my-cart">Wishlist</span>
                                                            <% if(userWishlist && userWishlist.products.length > 0){%>
                                                            <span class="badge"><%= userWishlist.products.length %></span>
                                                            <%}%>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div><!-- End Header Cart Area-->
                                        <!-- Header Search -->

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <!-- Main Menu Area -->
                                    <div class="main-menu-area another-home-mainmenu-area home-4-main-menu-area">
                                        <!-- Main Menu -->
                                        <div class="main-menu d-none d-lg-block">
                                            <nav>
                                                <ul class="main-ul">
                                                    <li class="sub-menu-li"><a href="/" class="active">Home<i
                                                                class=""></i></a>
                                                    </li>

                                                    <li><a href="/shop"><span class="label-menu">Sale</span> Shop<i
                                                                class=""></i></a>
                                                    </li>

                                                    <li class="small-megamenu-li"><a href="shop.html">About us<i
                                                                class=""></i></a>
                                                    </li>

                                                    <li><a href="shop.html">Contact<i class=""></i></a>
                                                    </li>

                                                    <li class="sub-menu-li"><a href="#" class="new-arrivals">Blog<i
                                                                class=""></i></a>
                                                    </li>


                                                    <% if (locals.user) { %>
                                                        <li class="dropdown nav-item">
                                                            <a class="" data-bs-toggle="dropdown" href="#"
                                                                id="dropdownAccount" aria-expanded="false">
                                                                Account </a>
                                                            <!-- <img class="svgInject" alt="Account" src="" style="height: 25px; width: 25px; margin-top: 2px;"> -->

                                                            <div class="dropdown-menu dropdown-menu-end"
                                                                aria-labelledby="dropdownAccount">
                                                                <a class="dropdown-item" href="/profile"><i
                                                                        class="material-icons md-perm_identity"></i>
                                                                    Profile</a>
                                                                <div class="dropdown-divider"></div>
                                                                <a class="dropdown-item text-danger" href="/logout"><i
                                                                        class="material-icons md-exit_to_app"></i>
                                                                    Logout</a>
                                                            </div>
                                                        </li>
                                                        <% } else { %>
                                                            <!-- Displayed when the user is not logged in -->
                                                            <li class="ml-25 pr-5"><a href="/login">Login</a></li>

                                                            <% } %>
                                                </ul>
                                            </nav>
                                        </div>
                                        <!-- End Main Menu -->

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Header Area ------------------------------------------------------------------------->



    <h5 class="text-center text-muted">Your Account</h5>

    <main class="main">
        <!-- <div class="page-header breadcrumb-wrap">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html" rel="nofollow">Home</a>
                <span></span> Pages
                <span></span> Account
            </div>
        </div>
    </div> -->
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-text">Pages</span>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-text">Account</span>

                </div>
            </div>
        </div>

        <section class="pt-150 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">

                            <div class="col-md-4">
                                <div class="dashboard-menu" style="font-size: 15px; text-align: left;">
                                    <ul class="nav flex-column" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link text-muted " id="dashboard-tab" data-bs-toggle="tab"
                                                href="#dashboard" role="tab" aria-controls="dashboard"
                                                aria-selected="false"><i
                                                    class="fi-rs-settings-sliders mr-10 "></i>Dashboard</a>
                                        </li>
                                        <li class="nav-item  ">
                                            <a class="nav-link text-muted" id="orders-tab" data-bs-toggle="tab"
                                                href="#orders" role="tab" aria-controls="orders"
                                                aria-selected="false"><i class="fi-rs-shopping-bag mr-10"></i>My
                                                Orders</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link text-muted " id="track-orders-tab" data-bs-toggle="tab"
                                                href="#track-orders" role="tab" aria-controls="track-orders"
                                                aria-selected="false"><i
                                                    class="fi-rs-shopping-cart-check mr-10"></i>Wallet Status</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link text-muted " id="track-orders-tab" data-bs-toggle="tab"
                                                href="#wallet-history" role="tab" aria-controls="track-orders"
                                                aria-selected="false"><i
                                                    class="fi-rs-shopping-cart-check mr-10"></i>Wallet History</a>
                                        </li>
                                        <!-- <li class="nav-item">
                                        <a class="nav-link text-muted " id="track-orders-tab" data-bs-toggle="tab"
                                            href="#referal" role="tab" aria-controls="track-orders"
                                            aria-selected="false"><i
                                                class="fi-rs-shopping-cart-check mr-10"></i>Referrals</a>
                                    </li> -->
                                        <li class="nav-item ">
                                            <a class="nav-link text-muted " id="address-tab" data-bs-toggle="tab"
                                                href="#address" role="tab" aria-controls="address"
                                                aria-selected="true"><i class="fi-rs-marker mr-10"></i>My Address</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link text-muted " id="account-detail-tab" data-bs-toggle="tab"
                                                href="#account-detail" role="tab" aria-controls="account-detail"
                                                aria-selected="true"><i class="fi-rs-sign-out mr-10"></i>Account
                                                details</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link text-muted " href="/logout"><i
                                                    class="fi-rs-sign-out mr-10"></i>Logout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>


                            <div class="col-md-8">
                                <div class="tab-content dashboard-content">
                                    <% if(user){%>
                                        <p>Share referral code <span class="text-danger">
                                                <%=user.referralCode%>
                                            </span> and get reward.
                                            <a href="#!"><span class="text-danger"
                                                    onclick="referralShare('<%= user.referralCode%>')"><u>Share</u></span></a>
                                        </p>
                                        <%}%>
                                            <div class="tab-pane fade show active" id="dashboard" role="tabpanel"
                                                aria-labelledby="dashboard-tab">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5 class="mb-0">User Profile</h5>
                                                    </div>
                                                    <% if(user){%>
                                                        <div class="card-body text-center">
                                                            <!-- <img src="" class="card-img-top rounded-circle mx-auto mt-3" alt="Profile Image"
                                                style="width: 100px; height: 100px; object-fit: cover;"> -->
                                                            <i
                                                                class="fas fa-user-circle fa-5x rounded-circle mx-auto mt-3 text-secondary"></i>
                                                            <div class="card-body text-center">
                                                                <h5 class="card-title font-weight-bold">
                                                                    <%=user.name%>
                                                                </h5>
                                                                <p class="card-text " style="font-size: 13px;">
                                                                    <strong>Email : </strong>
                                                                    <%=user.email%>
                                                                </p>
                                                                <p class="card-text" style="font-size: 13px;">
                                                                    <strong>Phone : </strong>
                                                                    <%=user.mobile%>
                                                                </p>
                                                                <!-- <p class="card-text" style="font-size: 13px;"><strong>Account Id:</strong> user id</p> -->
                                                            </div>
                                                        </div>
                                                        <%}%>
                                                </div>

                                            </div>



                                            <div class="tab-pane fade" id="orders" role="tabpanel"
                                                aria-labelledby="orders-tab">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5 class="mb-0">Your Orders</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <table class="table" id="order-table">
                                                                <thead>

                                                                    <tr>

                                                                        <th>Image</th>
                                                                        <th>Name</th>
                                                                        <th>Date</th>
                                                                        <th>Status</th>
                                                                        <th>Total</th>
                                                                        <th>Actions</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <%if(order && order.length> 0){%>
                                                                        <% order.forEach((order, index)=> {%>
                                                                            <% order.items.forEach((item, i)=> {%>
                                                                                <tr>


                                                                                    <td>
                                                                                        <img src="/uploads/product-images/<%=item.productId.productImage[0]%>"
                                                                                            alt="product"
                                                                                            style="width: 50px; height: 50px;">
                                                                                    </td>
                                                                                    <td>
                                                                                        <%=item.productId.productName%>
                                                                                    </td>

                                                                                    <%if(i===0){%>
                                                                                        <td>
                                                                                            <%=order.createdAt.toLocaleDateString()%>
                                                                                        </td>

                                                                                        <td>
                                                                                            <%=order.status%>
                                                                                        </td>

                                                                                        <td>Rs.<%=order.totalCost%>.00
                                                                                        </td>
                                                                                        <%}else{%>
                                                                                            <td class="text-danger">---
                                                                                            </td>
                                                                                            <td class="text-danger">---
                                                                                            </td>
                                                                                            <td class="text-danger">---
                                                                                            </td>

                                                                                            <%}%>
                                                                                                <td><a href="/userOrderDetails?orderId=<%=order._id%>"
                                                                                                        class="btn-small d-block">View
                                                                                                        Order</a></td>
                                                                                </tr>

                                                                                <%})%>
                                                                                    <%})%>
                                                                                        <%}else{%>
                                                                                            <tr>
                                                                                                <td colspan="5">No
                                                                                                    orders found</td>
                                                                                            </tr>
                                                                                            <%}%>
                                                                </tbody>
                                                            </table>
                                                            <nav aria-label="Page navigation">
                                                                <ul id="pagination"
                                                                    class="pagination justify-content-center">
                                                                    <!-- Pagination links will be dynamically added here -->


                                                                </ul>
                                                            </nav>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="track-orders" role="tabpanel"
                                                aria-labelledby="track-orders-tab">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5 class="mb-0">Wallet</h5>
                                                    </div>
                                                    <div class="card-body contact-from-area">

                                                        <div class="row">
                                                            <div class="col-lg-8 mx-auto text-center mt-90">
                                                                <!-- <form > -->
                                                                <div class="form-group">
                                                                    <label for="walletAmount" class="h4">Amount</label>
                                                                    <%if(wallet && wallet !=='' ){%>
                                                                        <div class="h5" id="walletMoney">Rs.
                                                                            <%=wallet.balance%>.00</div>
                                                                        <%} else {%>
                                                                            <div class="h5" id="walletMoney">Rs.0.00
                                                                            </div>
                                                                            <%}%>


                                                                </div>

                                                                <button type="button" class="btn btn-success" onclick=""
                                                                    id="addMoneyButton">Add Money</button>
                                                                <!-- </form> -->
                                                            </div>
                                                        </div>



                                                    </div>
                                                </div>
                                            </div>







                                            <div class="tab-pane fade" id="wallet-history" role="tabpanel"
                                                aria-labelledby="orders-tab">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5 class="mb-0">Wallet History</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-responsive">
                                                            <table class="table" id="wallet-table">
                                                                <thead>
                                                                    <tr>
                                                                        <th>No:</th>
                                                                        <th>Date</th>
                                                                        <th>Status</th>
                                                                        <th>Amount</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <% if (wallet && wallet !=='' &&
                                                                        wallet.history.length> 0) { %>
                                                                        <% wallet.history.sort((a, b)=> new Date(b.date)
                                                                            - new Date(a.date))
                                                                            wallet.history.forEach((wal, index) => {
                                                                            %>
                                                                            <tr>
                                                                                <td>
                                                                                    <%= index + 1%>
                                                                                </td>
                                                                                <td>
                                                                                    <%= wal.date.toLocaleDateString() %>
                                                                                </td>
                                                                                <td>
                                                                                    <%= wal.status %>
                                                                                </td>
                                                                                <td>Rs.<%= wal.payment %>.00</td>
                                                                            </tr>
                                                                            <% }) %>
                                                                                <% } else { %>
                                                                                    <tr>
                                                                                        <td colspan="3">No transactions
                                                                                            here</td>
                                                                                    </tr>
                                                                                    <% } %>
                                                                </tbody>

                                                            </table>
                                                            <nav aria-label="Page navigation">
                                                                <ul id="walletPagination"
                                                                    class="pagination justify-content-center">
                                                                    <!-- Pagination links will be dynamically added here -->


                                                                </ul>
                                                            </nav>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>







                                            <div class="tab-pane fade" id="referal" role="tabpanel"
                                                aria-labelledby="track-orders-tab">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5 class="mb-0">Referal Offer</h5>
                                                    </div>
                                                    <div class="card-body contact-from-area">

                                                        <div class="row">
                                                            <div class="col-lg-8 mx-auto text-center mt-50">
                                                                <form onsubmit="" method="post" action="">
                                                                    <div class="form-group">
                                                                        <label for="walletAmount" class="h4">Your
                                                                            referal
                                                                            code</label>

                                                                        <br>
                                                                        <h5>
                                                                            referal code
                                                                        </h5>

                                                                        <br>
                                                                        <h5>No referal code found</h5>

                                                                    </div>

                                                                    <div class="mt-60">
                                                                        <h5>Do you have a code?</h5>
                                                                        <br>
                                                                        <input class="border-1" id="referalCode"
                                                                            type="text" name="referalCode" required
                                                                            style="border: 1px solid #000; width: 200px;">
                                                                        <br><br>
                                                                        <button type="submit">Get reward</button>
                                                                    </div>

                                                                </form>
                                                            </div>
                                                        </div>



                                                    </div>
                                                </div>
                                            </div>



                                            <div class="tab-pane fade" id="address" role="tabpanel"
                                                aria-labelledby="address-tab">
                                                <div class="row">

                                                    <% if(userAddress){%>

                                                        <% userAddress.addresses.forEach((address)=> {%>
                                                            <div class="col-lg-6">
                                                                <div class="card  mb-3 mb-lg-0">
                                                                    <div class="card-header">
                                                                        <h5 class="mb-0">
                                                                            <strong>
                                                                                <%=address.addressType%>
                                                                            </strong>
                                                                        </h5>
                                                                    </div>

                                                                    <div class="card-body">
                                                                        <address class="" style="font-size: 12px;">
                                                                            <strong> Name : </strong>
                                                                            <%=address.name%><br /><br />
                                                                                <strong>Address Line : </strong>
                                                                                <%=address.addressLine%><br /><br />
                                                                                    <strong>City : </strong>
                                                                                    <%=address.city%><br /><br />
                                                                                        <strong>State : </strong>
                                                                                        <%=address.state%><br /><br />
                                                                                            <strong>Pincode : </strong>
                                                                                            <%=address.pincode%>
                                                                                                <br /><br />
                                                                                                <strong>Phone :
                                                                                                </strong>
                                                                                                <%=address.phone%>
                                                                                                    <br /><br />
                                                                                                    <strong>Alternate :
                                                                                                    </strong>
                                                                                                    <%=address.altPhone%>
                                                                        </address>

                                                                        <div class="d-flex justify-content-between">
                                                                            <a href="/editAddress?id=<%=address._id%>"
                                                                                class="btn-small">Edit</a>
                                                                            <a href="" class="btn-small"
                                                                                onclick="removeAddress('<%=address._id%>',event)">Delete</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <% }) %>
                                                                <% }else{ %>


                                                                    <div class="col-lg-6">
                                                                        <div class="card  mb-3 mb-lg-0">
                                                                            <div class="card-header">
                                                                                <h5 class="mb-0"></h5>
                                                                            </div>
                                                                            <div class="card-body">
                                                                                <address>
                                                                                    No address
                                                                                </address>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <% } %>

                                                                        <div>
                                                                            <a href="/addAddress">
                                                                                <button class="btn">+Add
                                                                                    address</button>
                                                                            </a>
                                                                        </div>


                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="account-detail" role="tabpanel"
                                                aria-labelledby="account-detail-tab">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5>Account Details</h5>
                                                    </div>
                                                    <div class="card-body">

                                                        <form id="editUserForm" method="post" action="">
                                                            <div class="row">
                                                                <div class="form-group col-md-8">
                                                                    <span class="required text-danger">*</span><label>
                                                                        Name</label>

                                                                    <div><span class="text-danger"
                                                                            id="newNameError"></span></div>

                                                                    <input id="newName" value="<%=user.name%>"
                                                                        class="form-control square" name="name"
                                                                        type="text">
                                                                </div>

                                                                <div class="form-group col-md-8">
                                                                    <span
                                                                        class="required text-danger">*</span><label>Mobile
                                                                        Number </label>

                                                                    <div><span class="text-danger"
                                                                            id="newMobileError"></span></div>

                                                                    <input id="newMobile" value="<%=user.mobile%>"
                                                                        class="form-control square" name="phone"
                                                                        type="text">
                                                                </div>
                                                                <% if(user.mobile){%>
                                                                <div class="form-group col-md-8">
                                                                    <span
                                                                        class="required text-danger">*</span><label>Current
                                                                        Password</label>

                                                                    <div><span class="text-danger"
                                                                            id="currentPasswordError"></span></div>

                                                                    <input id="currentPassword" value=""
                                                                        class="form-control square" name="cPassword"
                                                                        type="password">
                                                                </div>
                                                                <%}%>

                                                                <div class="form-group col-md-8">
                                                                    <span class="required text-danger">*</span>
                                                                    <label>New Password</label>

                                                                    <div><span class="text-danger"
                                                                            id="newPasswordError"></span></div>

                                                                    <input id="newPassword" value=""
                                                                        class="form-control square" name="password"
                                                                        type="password">
                                                                </div>
                                                                <div class="col-md-12 mt-15">
                                                                    <button type="submit"
                                                                        class="btn btn-fill-out submit" name="submit"
                                                                        value="Submit">Save</button>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>




    <div class="modal fade" id="addMoneyModal" tabindex="-1" role="dialog" aria-labelledby="addMoneyModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addMoneyModalLabel">Add Money to Wallet</h5>
                    <!-- Close button -->
                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addMoneyForm">
                        <div class="form-group">
                            <label for="amount"><sup class="text-danger">*</sup>Amount (INR)</label>
                            <div><span class="text-danger" id="erroAmount"></span></div>
                            <input type="number" class="form-control" id="amount" name="amount" autocomplete="off">
                        </div>
                        <div class="mt-4">
                            <button type="submit" class="btn btn-primary">Proceed to Pay</button>

                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>







    <!-- Footer area start---------------------------------------------------------------------------->
    <div class="footer-area mt-5">
        <!-- Footer Top -->
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4">
                        <!-- Footer Left -->
                        <div class="footer-left">
                            <!-- Footer Logog -->
                            <div class="footer-logo">
                                <a href="index.html"><img src="assets/img/logo/logo-footer.webp" alt="logo"></a>
                            </div>
                            <div class="footer-static-content">
                                <p>Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium
                                    lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram.</p>
                            </div>
                            <div class="footer-payment">
                                <h2>Payments</h2>
                                <ul>
                                    <li><a href="#"><img src="assets/img/logo/payment.webp" alt="payment"></a></li>
                                </ul>
                            </div>
                        </div><!-- End Footer Left -->
                    </div>
                    <div class="col-lg-8 footer-right-col">
                        <!-- Footer Right -->
                        <div class="footer-right">
                            <div class="footer-newsletter">
                                <h2>Newsletter</h2>
                                <form action="#">
                                    <input type="text" placeholder="Your Email" title="Sign up for our newsletter"
                                        required>
                                    <button type="submit">Subscribe</button>
                                </form>
                            </div>
                            <div class="information-link">
                                <div class="single-information-link">
                                    <h2>Informations</h2>
                                    <ul>
                                        <li><a href="#">Sitemap</a></li>
                                        <li><a href="#">Privacy Policy</a></li>
                                        <li><a href="#">Your Account</a></li>
                                        <li><a href="#">Advanced Search</a></li>
                                        <li><a href="#">Contact Us</a></li>
                                    </ul>
                                </div>
                                <div class="single-information-link">
                                    <h2>other static link</h2>
                                    <ul>
                                        <li><a href="#">Product Recall</a></li>
                                        <li><a href="#">Gift Vouchers</a></li>
                                        <li><a href="#">Returns and Exchanges</a></li>
                                        <li><a href="#">Shipping Options</a></li>
                                        <li><a href="#">Help & FAQs</a></li>
                                    </ul>
                                </div>
                                <div class="single-information-link">
                                    <h2> My account </h2>
                                    <ul>
                                        <li><a href="#">My orders</a></li>
                                        <li><a href="#">My credit slips</a></li>
                                        <li><a href="#">My addresses</a></li>
                                        <li><a href="#">My personal info</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div><!-- End Footer Left -->
                    </div>
                </div>
            </div>
        </div><!-- End Footer Top -->
        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <div class="container">
                <!-- Copyright -->
                <div class="copyright">
                    <p>Copyright &copy; <a href="https://hasthemes.com/">HasThemes</a> All Rights Reserved.</p>
                </div>
            </div>
        </div><!-- End Footer Bottom -->
    </div>
    <!-- End Footer area -->
    <!-- QUICKVIEW PRODUCT -->
    <div id="quickview-wrapper">
        <!-- Modal -->
        <div class="modal fade" id="productModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-product">
                            <div class="product-images">
                                <div class="main-image images">
                                    <img alt="product" src="assets/img/product/sp2.webp">
                                </div>
                            </div><!-- .product-images -->

                            <div class="product-info">
                                <h1>Cras neque metus</h1>
                                <div class="price-box">
                                    <p class="price"><span class="special-price"><span
                                                class="amount">$155.00</span></span></p>
                                </div>
                                <a href="single-product.html" class="see-all">See all features</a>
                                <div class="quick-add-to-cart">
                                    <form method="post" class="cart">
                                        <div class="add-to-box add-to-box2">
                                            <div class="add-to-cart">
                                                <div class="input-content">
                                                    <label for="qty">Qty:</label>
                                                    <input type="button" value="-" onclick="" class="qty-decrease">
                                                    <input type="text" name="qty" id="qty" maxlength="12" value="1"
                                                        title="Qty" class="input-text qty">
                                                    <input type="button" value="+" onclick="" class="qty-increase">
                                                </div>
                                                <button class="btn" type="button"><span>Add to cart</span></button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="quick-desc">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam fringilla augue nec est
                                    tristique auctor. Donec non est at libero vulputate rutrum. Morbi ornare lectus quis
                                    justo gravida semper. Nulla tellus mi, vulputate adipiscing cursus eu, suscipit id
                                    nulla.
                                </div>
                                <div class="social-sharing">
                                    <div class="widget widget_socialsharing_widget">
                                        <h3 class="widget-title-modal">Share this product</h3>
                                        <ul class="social-icons">
                                            <li><a target="_blank" title="Facebook" href="#"
                                                    class="facebook social-icon"><i class="fa fa-facebook"></i></a></li>
                                            <li><a target="_blank" title="Twitter" href="#"
                                                    class="twitter social-icon"><i class="fa fa-twitter"></i></a></li>
                                            <li><a target="_blank" title="Pinterest" href="#"
                                                    class="pinterest social-icon"><i class="fa fa-pinterest"></i></a>
                                            </li>
                                            <li><a target="_blank" title="Google +" href="#"
                                                    class="gplus social-icon"><i class="fa fa-google-plus"></i></a></li>
                                            <li><a target="_blank" title="LinkedIn" href="#"
                                                    class="linkedin social-icon"><i class="fa fa-linkedin"></i></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div><!-- .product-info -->
                        </div><!-- .modal-product -->
                    </div><!-- .modal-body -->
                </div><!-- .modal-content -->
            </div><!-- .modal-dialog -->
        </div><!-- END Modal -->
    </div><!-- END QUICKVIEW PRODUCT -->
    <!--Footer end area------------------------------------------------------------------------->

    <!-- Include jQuery first -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script>


        async function referralShare(referral) {

            const url = `http://localhost:2018`
            if (navigator.share) {
                const shareLink = {
                    title: 'Aromatica',
                    text: `Use the referral code ${referral} to signup and get reward`,

                }
                try {
                    await navigator.share(shareLink)
                } catch (error) {
                    console.log('Error in link sharing:', error)
                }
            }
            else {
                console.log('Share api not supported');
                const fallBackText = `Use the referral code ${referral} to signup and get rewards`
                copyToClickBoard(fallBackText)
            }
        }


        function copyToClickBoard(text) {
            const textArea = document.createElement('textarea')
            textArea.value = text
            document.body.appendChild(textArea)
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea)
        }





        const changePage = async (page) => {
            try {
                const response = await fetch(`/getUserOrders?page=${page}`);
                const { orders, totalPage } = await response.json();

                const tbody = document.querySelector("#order-table tbody");
                tbody.innerHTML = ''

                orders.forEach((order) => {
                    const row = `
                <tr>
                    <td><img src="/uploads/product-images/${order.items[0].productId.productImage[0]}" alt="product" style="width: 50px; height: 50px;"></td>
                    <td>${order.items[0].productId.productName}</td>
                    <td>${new Date(order.createdAt).toLocaleDateString()}</td>
                    <td>${order.status}</td>
                    <td>Rs.${order.totalCost}.00</td>
                    <td><a href="/userOrderDetails?orderId=${order._id}" class="btn-small d-block">View Order</a></td>
                </tr>
            `;

                    tbody.insertAdjacentHTML("beforeend", row)
                });

                const pagination = document.querySelector('#pagination');
                pagination.innerHTML = ''



                for (let i = 1; i <= totalPage; i++) {
                    const li = `<li class="page-item ${page === i ? 'active' : ''}"><button class="page-link" onclick="changePage(${i})">${i}</button></li>`;
                    pagination.insertAdjacentHTML("beforeend", li)
                }
            } catch (error) {
                console.log(`Error in getting order details with pagination ${error}`)
            }
        }



        const changeWalletPage = async (page) => {
            try {
                const response = await fetch(`/getWalletDetails?page=${page}`);
                const { transaction, totalPage } = await response.json();


                const tbody = document.querySelector('#wallet-table tbody');
                tbody.innerHTML = ''

                transaction.forEach((trans, index) => {
                    const row = `
                <tr>
                    <td>${(page - 1) * 5 + index + 1}</td>
                    <td>${new Date(trans.date).toLocaleDateString()}</td>
                    <td>${trans.status}</td>
                    <td>Rs.${trans.payment}.00</td>
                </tr>
            `;

                    tbody.insertAdjacentHTML('beforeend', row)
                })

                const pagination = document.getElementById('walletPagination');
                pagination.innerHTML = ''

                for (let i = 1; i <= totalPage; i++) {
                    const li = `<li class="page-item ${page === i ? 'active' : ''}"><button class="page-link" onclick="changeWalletPage(${i})">${i}</button></li>`;
                    pagination.insertAdjacentHTML('beforeend', li)
                }
            } catch (error) {
                console.error(`Error in getting wallet details with pagination ${error}`);
            }

        }

        window.onload = () => {
            changePage(1)
            changeWalletPage(1)
        }



    </script>
    <script>

        $(document).ready(function () {
            $('#addMoneyButton').click(function (event) {
                event.preventDefault();
                $('#addMoneyModal').modal('show');

                $('#addMoneyForm').submit(function (event) {
                    event.preventDefault();

                    const amount = $('#amount').val().trim();
                    let isValid = true

                    if (amount === '' || amount === null) {
                        $('#erroAmount').text('Field is require');
                        isValid = false
                    }
                    else if (amount <= 0) {
                        $('#erroAmount').text('Please enter the valid money');
                        isValid = false
                    }
                    else {
                        $('#erroAmount').text('')
                    }


                    if (isValid) {

                        $.ajax({
                            url: '/addMoney',
                            method: 'post',
                            data: { amount: amount },
                            success: (response) => {
                                $('#addMoneyModal').modal('hide');

                                if (response.success) {
                                    const orderId = response.order.id

                                    let options = {
                                        key: response.keyId,
                                        amount: response.order.amount,
                                        currency: response.order.currency,
                                        name: 'Aromatica',
                                        order_id: orderId,
                                        handler: function (res) {

                                            walletPayment(res)
                                        },
                                        prefill: {
                                            name: response.user.name,
                                            email: response.user.email,
                                            contact: response.user.mobile
                                        },
                                        theme: {
                                            color: '#F37254',

                                        }

                                    };
                                    let rzp = new Razorpay(options);
                                    rzp.open();
                                }
                            },
                            error: (error) => {
                                console.log("error in ajax :", error);
                                Swal.fire({
                                    title: "Error!",
                                    text: 'Something went wrong, please try again',
                                    icon: 'error'
                                })
                            }
                        })
                    }
                })

            })
        })


        function walletPayment(response) {
            $.ajax({
                url: '/addMoneySuccess',
                method: 'post',
                data: response,
                success: (response) => {
                    if (response.success) {

                        Toastify({
                            text: response.message,
                            duration: 3000,
                            close: true,
                            backgroundColor: '#28a745',
                            gravity: 'top',
                            position: 'right'
                        }).showToast();

                        setTimeout(() => {
                            window.location.reload();
                        }, 3000);
                    }
                    else {
                        Toastify({
                            text: response.message,
                            duration: 3000,
                            close: true,
                            backgroundColor: '#dc3545',
                            gravity: 'top',
                            position: 'left'
                        }).showToast();

                    }
                },
                error: (error) => {
                    console.log("Error in ajax :", error);
                    Swal.fire({
                        title: "Error!",
                        text: 'Something went wrong, please try again',
                        icon: 'error'
                    })
                }
            })
        }











        const successMessage = document.getElementById("successMessage")
        setTimeout(() => {
            successMessage.style.display = "none"
        }, 3000);



        $(document).ready(function () {
            $('#editUserForm').submit(function (event) {
                event.preventDefault();

                $('#newNameError').text('');
                $('#newMobileError').text('');
                $('#newPasswordError').text('');

                let name = $('#newName').val().trim()
                let mobile = $('#newMobile').val().trim()
                let currentPassword = $('#currentPassword').val() ? $('#currentPassword').val().trim() : '';
                let password = $('#newPassword').val().trim()

                const nameValid = /^[a-zA-Z]+(?: [a-zA-Z]+)*$/;
                const mobileValid = /^[0-9]{10}$/;
                const passwordValid = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
                const digitsValid = /^[0-9]+$/

                let isValid = true


                // name validation
                if (name === '') {
                    $('#newNameError').text('Name is required');
                    isValid = false
                }
                else if (name.length <= 4) {
                    $('#newNameError').text('Name is too short,enter minimum 5 characters');
                    isValid = false
                }
                else if (!nameValid.test(name)) {
                    $('#newNameError').text('Should contain only alphabets');
                    isValid = false
                }


                // mobile validation
                if (mobile === '') {
                    $('#newMobileError').text('Mobile nubmer is required');
                    isValid = false
                }
                else if (!mobileValid.test(mobile)) {
                    $('#newMobileError').text('Please enter valid mobile number');
                    isValid = false
                }
                else if (!digitsValid.test(mobile)) {
                    $('#newMobileError').text('Should contain only digits');
                    isValid = false
                }


                // password validation
                // if (password === '') {
                //     isValid = false
                // }
                else if (password && password.length <= 7) {
                    $('#newPasswordError').text('Should contain minimum 8 characters');
                    isValid = false
                }
                else if (password && !passwordValid.test(password)) {
                    $('#newPasswordError').text('Should contain mixed characters Aa@123');
                    isValid = false
                }



                if (isValid) {
                    let userData
                    if(currentPassword && currentPassword !== ''){

                         userData = {
                            name: name,
                            mobile: mobile,
                            currentPassword: currentPassword,
                            password: password
                        }
                    }
                    else{
                        userData = {
                            name: name,
                            mobile: mobile,
                            password: password
                        }
                    }
                    $.ajax({
                        url: '/updateUserDetails',
                        method: 'post',
                        data: userData,
                        success: (response) => {
                            if (response.status === true) {
                                Toastify({
                                    text: response.message,
                                    duration: 3000,
                                    close: true,
                                    backgroundColor: "#28a745",

                                }).showToast();

                                setTimeout(() => {
                                    location.reload();
                                }, 3000);

                            } else if (response.message === 'Current password is not match' || response.message === 'Enter the current password') {

                                $('#currentPasswordError').text(response.message);

                                setTimeout(() => {
                                    $('#currentPasswordError').text('');
                                }, 4000);

                            } else if (response.message === 'Enter a new password') {

                                $('#newPasswordError').text(response.message);

                                setTimeout(() => {
                                    $('#newPasswordError').text('');
                                }, 4000);

                            } else {

                                Toastify({
                                    text: response.message,
                                    duration: 3000,
                                    close: true,
                                    backgroundColor: "#dc3545",

                                }).showToast();
                            }
                        },
                        error: (error) => {
                            Swal.fire({
                                title: "Error!",
                                text: "Something went wrong, please try again",
                                icon: 'error',
                                timer: 3000
                            })
                        }
                    })
                }
            });
        });

    </script>

    <script>

        function removeAddress(addressId, event) {
            event.preventDefault();
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        url: "/deleteAddress",
                        method: "post",
                        data: { addressId },
                        success: function (response) {
                            if (response.status === true) {
                                Swal.fire({
                                    title: "Deleted!",
                                    text: "Address has been deleted",
                                    icon: "success",
                                    timer: 2000,
                                    showConfirmButton: false,
                                }).then(() => {
                                    location.reload();
                                })
                            }
                            else {
                                Swal.fire({
                                    title: "Error..!",
                                    text: response.message,
                                    icon: "error",
                                    showConfirmButton: true

                                });
                            }
                        },
                        error: function (error) {
                            console.log(`Ajax error occur while removing address ${error}`);
                            Swal.fire({
                                title: "Somthing Wrong",
                                text: "Failed to remove",
                                icon: "error",
                                showConfirmButton: true
                            });
                        }
                    })
                }
            })
        }

    </script>



    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <!-- Include Bootstrap JS -->
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->

    <!-- ============================================ -->
    <script src="assets/js/vendor/jquery-1.12.4.min.js"></script>
    <!-- bootstrap JS
    ============================================ -->
    <script src="assets/js/bootstrap.min.js"></script>
    <!-- nivo slider js
    ============================================ -->
    <script src="assets/js/jquery.nivo.slider.pack.js"></script>
    <!-- Mean Menu js
    ============================================ -->
    <script src="assets/js/jquery.meanmenu.min.js"></script>
    <!-- wow JS
    ============================================ -->
    <script src="assets/js/wow.min.js"></script>
    <!-- price-slider JS
    ============================================ -->
    <script src="assets/js/jquery-price-slider.js"></script>

    <!-- modernizr JS
		============================================ -->
    <script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>

    <!-- Simple Lence JS
    ============================================ -->
    <script type="text/javascript" src="assets/js/jquery.simpleGallery.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.simpleLens.min.js"></script>
    <!-- owl.carousel JS
    ============================================ -->
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- scrollUp JS
    ============================================ -->
    <script src="assets/js/jquery.scrollUp.min.js"></script>
    <!-- jquery Collapse JS
    ============================================ -->
    <script src="assets/js/jquery.collapse.js"></script>
    <!-- plugins JS
    ============================================ -->
    <script src="assets/js/plugins.js"></script>
    <!-- main JS
    ============================================ -->
    <script src="assets/js/main.js"></script>

</body>

</html>